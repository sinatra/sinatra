# frozen_string_literal: true

source 'https://rubygems.org'
gemspec

gem 'rack-protection', path: '../rack-protection'
gem 'sinatra', path: '..'

gem 'rack-test', github: 'rack/rack-test'

group :development, :test do
  platform :jruby do
    gem 'json'
    gem 'rdoc'
    gem 'therubyrhino'
    gem 'jar-dependencies', '= 0.4.1' # Gem::LoadError with jar-dependencies 0.4.2
  end

  platform :jruby, :ruby do
    gem 'hamlit', '>= 3'
    gem 'liquid', '~> 2.6.x'
    gem 'slim'
  end

  platform :ruby do
    gem 'execjs', '>= 2.0.0'
    gem 'nokogiri', '>= 1.13.6'
    gem 'redcarpet', '>= 3.5.1'
    gem 'yajl-ruby'
  end

  gem 'multi_json'
end

rack_version = ENV['rack'].to_s
rack_version = nil if rack_version.empty? || (rack_version == 'stable')
rack_version = { github: 'rack/rack' } if rack_version == 'latest'
gem 'rack', rack_version

# tilt may move to https://github.com/jeremyevans/tilt
# https://github.com/rtomayko/tilt/pull/394#issuecomment-1428522576
tilt_version = ENV['tilt'].to_s
tilt_version = nil if tilt_version.empty? || (tilt_version == 'stable')
tilt_version = { github: 'rtomayko/tilt' } if tilt_version == 'latest'
gem 'tilt', tilt_version
